(window._ambjs=window._ambjs||[]).push([[80],{tQQX:function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return U}));var r,n,i,s=a("5n0U"),o=(a("W0B4"),a("mXGw")),l=a.n(o),m=a("xARA"),c=a.n(m),p=a("/gfI"),d=a.n(p),h=a("1IY1"),g=a("8Jek"),y=a.n(g),b=a("34+6"),u=a.n(b),T=a("oqtq"),P=a("c3et"),I=a("qvLH"),j=a("Ack5"),O=a("rXQT"),_=a("sUqi"),v=a("KGYK"),E=a("A7K1"),x=a("zwXI"),D=a.n(x),U=Object(h.d)(D.a)((i=n=class extends l.a.Component{constructor(t){super(t);var e=t.entry||{},a=e.entry_text||"";this.state={clipPortalTargets:[],html:Object(_.a)(a),imageEmbedTargets:[],entry:e,imageProtectionType:t.imageProtectionType||""}}componentDidMount(){this.handleMount()}static getDerivedStateFromProps(t,e){var a=(e.entry||{}).entry_text||"",r=t.entry||{},n=r.entry_text||"";return a!==n||t.imageProtectionType!==e.imageProtectionType?{clipPortalTargets:[],html:Object(_.a)(n),imageEmbedTargets:[],entry:r,imageProtectionType:t.imageProtectionType}:null}shouldComponentUpdate(t,e){return this.props.openModal!==t.openModal||this.state.html!==e.html||!d()(this.state.clipPortalTargets,e.clipPortalTargets)||!d()(this.state.imageEmbedTargets,e.imageEmbedTargets)}componentDidUpdate(t,e){this.state.html!==e.html&&this.handleMount()}componentWillUnmount(){this.cleanUpPortals&&(this.cleanUpPortals(),this.cleanUpPortals=null)}handleMount(){var{amebaId:e,entry:a,imageProtectionType:r,pageType:n}=this.props;t(()=>{this.entryDetailText&&(Object(O.c)(this.entryDetailText,{amebaId:e,entryId:a.entry_id,imageProtectionType:r,pageType:n}),Object(O.a)(this.entryDetailText),Object(T.a)(this.entryDetailText,this.props.locationSearch),this.props.isOfficial&&"protected"!==this.props.imageReproduce&&this.setState({imageEmbedTargets:Object(O.b)(this.entryDetailText,D.a.ImageEmbedWrapper,D.a.ImageEmbedWrapper__EntryDesign)}),Object(E.a)(this.entryDetailText),this.setState({clipPortalTargets:Object(j.a)(this.entryDetailText,e,"".concat(a.entry_id),this.props.trackStartClip)}),this.cleanUpPortals&&this.cleanUpPortals(),this.cleanUpPortals=Object(v.a)(this.entryDetailText))})}renderClipPortal(){var t=this.state.clipPortalTargets.map(t=>t.element?c.a.createPortal(l.a.createElement(P.a,t.props),t.element):null);return t.length<1?null:t}renderImageEmbedButtonPortal(){var t=this.state.imageEmbedTargets.map(t=>c.a.createPortal(Object(s.a)("button",{className:D.a.ImageEmbedButton,style:{bottom:".5em"},onClick:()=>{this.props.openModal("".concat(this.props.entry.entry_id),I.b,{imageHeight:parseInt(t.dataset.imageHeight,10),imageId:t.dataset.imageId,imageWidth:parseInt(t.dataset.imageWidth,10)})}},void 0,Object(s.a)(u.a,{"aria-hidden":"true",className:D.a.ImageEmbedButtonIcon}),Object(s.a)("span",{className:D.a.ImageEmbedButtonLabel},void 0,"\u3053\u306e\u753b\u50cf\u3092\u30b7\u30a7\u30a2")),t));return t.length<1?null:t}render(){var{entry:t}=this.props;if("mon_ng"===t.closed_flg){var e=t.entry_text||"";return Object(s.a)("div",{className:"subContentsInner"},void 0,Object(s.a)("div",{className:"nopermitentry",dangerouslySetInnerHTML:{__html:e}}))}return Object(s.a)(l.a.Fragment,{},void 0,l.a.createElement("div",{className:y()("subContentsInner",D.a.Block,{[D.a.ImageProtected]:"all_deny"===this.props.imageProtectionType}),dangerouslySetInnerHTML:{__html:this.state.html},id:"entryBody",ref:t=>{this.entryDetailText=t}}),this.renderClipPortal(),this.renderImageEmbedButtonPortal())}},n.displayName="PcEntryDetailTextOld",n.defaultProps={locationSearch:null},r=i))||r}).call(this,a("oPUo").setImmediate)}}]);