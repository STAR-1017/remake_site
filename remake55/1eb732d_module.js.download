(window._ambjs=window._ambjs||[]).push([[265],{"3m0N":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return T}));var i=a("5n0U"),n=a("mK0O"),r=a("eijD"),o=(a("W0B4"),a("mXGw")),d=a.n(o),s=a("re7x"),c=a.n(s),l=a("/m4v"),m=a("xfIn"),p=a("WpNh"),g=a("1IY1"),h=a("tDZY"),b=a("20iu"),u=a("xoe0"),v=a("qvLH"),y=a("8Dlg"),f=a("GTfF"),O=a("n9Au"),w=a.n(O),x=a("YBEp");function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _={done:"\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\uff01",error:"\u30b3\u30d4\u30fc\u306b\u5931\u6557\u3057\u307e\u3057\u305f",waiting:"\u57cb\u3081\u8fbc\u307f\u30b3\u30fc\u30c9\u3092\u30b3\u30d4\u30fc"};function E(){return(E=Object(r.a)((function*(e){var{dispatch:t,match:a}=e,{params:i}=a,n=i.amebaId;t(Object(h.b)(n))}))).apply(this,arguments)}class S extends d.a.Component{static getDerivedStateFromProps(e,t){return e.isOpen&&(e.imageId!==t.imageId||e.entryId!==t.entryId)?j(j({},t),{},{entryId:e.entryId,entryTitle:e.entryTitle,imageHeight:e.imageHeight,imageId:e.imageId,imageWidth:e.imageWidth}):null}constructor(e){super(e),this.calcFittedEmbedWidth=Object(p.a)((e,t,a,i)=>{var n=t+2,r=.5*i,o=n*(.7*a)/(e+58),d=Math.min(n,r);return Math.min(o,d)}),this.state={copyState:"waiting",entryId:e.entryId,entryTitle:e.entryTitle,imageHeight:e.imageHeight,imageId:e.imageId,imageWidth:e.imageWidth},this.handleReceiveMessage=this.handleReceiveMessage.bind(this)}componentDidMount(){window.addEventListener("message",this.handleReceiveMessage,!1)}shouldComponentUpdate(e,t){return this.props.amebaId!==e.amebaId||this.props.blogTitle!==e.blogTitle||this.props.closeModal!==e.closeModal||this.props.isOpen!==e.isOpen||this.state.copyState!==t.copyState||this.state.entryId!==t.entryId||this.state.entryTitle!==t.entryTitle||this.state.imageHeight!==t.imageHeight||this.state.imageId!==t.imageId||this.state.imageWidth!==t.imageWidth}componentWillUnmount(){window.removeEventListener("message",this.handleReceiveMessage,!1)}handleClickCopy(){if("waiting"===this.state.copyState){var e=document.createElement("pre");e.style.position="fixed",e.style.left="100%",e.textContent=this.textarea.value,document.body.appendChild(e),document.getSelection().selectAllChildren(e);var t=document.execCommand("copy");document.body.removeChild(e),this.setState({copyState:t?"done":"error"}),setTimeout(()=>{this.setState({copyState:"waiting"})},2e3)}}handleReceiveMessage(e){var t=e.data||{};e.origin===window.process.env.HTTP_PATH_EMBED&&"EmbeddedImageSize"===t.type&&this.setState({imageHeight:t.imageHeight,imageWidth:t.imageWidth})}renderImageEmbed(e){var{amebaId:t,blogTitle:a}=this.props,{entryId:n,entryTitle:r,imageHeight:o,imageId:d,imageWidth:s}=this.state;return n&&d?Object(i.a)("div",{style:{maxWidth:s+2,position:"relative"}},void 0,Object(i.a)("div",{style:{paddingTop:"calc(".concat(100*o/s,"% + ").concat(58,"px)")}}),Object(i.a)("iframe",{frameBorder:"0",sandbox:e?void 0:"allow-popups allow-scripts",src:Object(y.a)(u.a.ImageEmbed,{amebaId:t,entryId:n,imageId:d}),style:{height:"100%",left:"0",position:"absolute",top:"0",width:"100%"},title:"".concat(r," \u306e\u8a18\u4e8b\u5185\u753b\u50cf | ").concat(a)})):null}renderContent(){var{imageHeight:e,imageWidth:t}=this.state,a=this.calcFittedEmbedWidth(e,t,window.innerHeight,window.innerWidth),n=this.renderImageEmbed(!0),r=c.a.renderToStaticMarkup(this.renderImageEmbed(!1));return Object(i.a)("div",{className:w.a.Block},void 0,Object(i.a)("div",{className:w.a.PreviewBlock},void 0,Object(i.a)("div",{style:{margin:"auto",maxWidth:"".concat(a,"px")}},void 0,n)),Object(i.a)("div",{className:w.a.EmbedCodeBlock},void 0,d.a.createElement("textarea",{className:w.a.EmbedCodeArea,readOnly:!0,ref:e=>{this.textarea=e},value:r,onClick:()=>{this.textarea.focus(),document.execCommand("selectAll")}}),Object(i.a)("button",{className:w.a.CopyButton,onClick:()=>{this.handleClickCopy()}},void 0,_[this.state.copyState]),Object(i.a)("p",{className:w.a.TermsText},void 0,"\u3053\u306e\u57cb\u3081\u8fbc\u307f\u30b3\u30fc\u30c9\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001Ameba\u306e",Object(i.a)("a",{className:w.a.TermsLink,href:"".concat(window.process.env.HTTP_PATH_HELPS,"/rules/post_104.html"),rel:"noreferrer noopener",target:"_blank"},void 0,"\u5229\u7528\u898f\u7d04"),"\u306b\u540c\u610f\u3059\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002")))}render(){return Object(i.a)(f.a,{contentLabel:"PcEntryImageEmbed",isOpen:this.props.isOpen,onRequestClose:()=>{this.props.closeModal()}},void 0,this.renderContent())}}S.displayName="Presenter";var T=Object(x.b)(Object(g.d)(w.a),Object(m.provideHooks)({done:function(e){return E.apply(this,arguments)}}),Object(l.b)((function(e,t){var{match:a}=t,{params:i}=a,n=i.amebaId,r=e.bloggerState,o=r.bloggerMap,d=(r.blogMap[(o[n]||{}).blog]||{}).blog_title||"",s=e.pcModalState,c=s.opendModalName===v.b,l="".concat(s.entryId)||"",m=s.data.imageHeight||0,p=s.data.imageId||"",g=s.data.imageWidth||0;return{amebaId:n,blogTitle:d,entryId:l,entryTitle:(e.entryState.entryMap[l]||{}).entry_title||"",imageHeight:m,imageId:p,imageWidth:g,isOpen:c}}),{closeModal:b.a}))(S)},"Po/G":function(e,t,a){var i=a("Ai0b")(!1);i.push([e.i,"._1R6Sur5D{display:table}._3Ecu7-gf{background-color:#f8f8f8;padding:32px;width:65%}._20pSmyKR,._3Ecu7-gf{box-sizing:border-box;display:table-cell;vertical-align:middle}._20pSmyKR{background-color:#efefef;padding:24px;width:35%}._2I3wQqml{border:1px solid #ccc;border-radius:4px;box-sizing:border-box;font-size:14px;min-height:15em;padding:1em;resize:none;vertical-align:bottom;width:100%;word-break:break-all}._9bN0aFmY{background-color:#2d8c3c;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:16px;font-weight:700;margin-top:24px;outline:none;padding:.8em;width:100%}._9bN0aFmY:focus{box-shadow:0 0 0 2px #49c755}._9bN0aFmY:hover{opacity:.85}._38NtEF0-{color:#666;font-size:12px;margin-top:24px;max-width:100%;text-align:left}._3YtB63aO,._3YtB63aO:active,._3YtB63aO:hover,._3YtB63aO:visited{color:#4290c6;text-decoration:none}._3YtB63aO:active,._3YtB63aO:hover{text-decoration:underline}",""]),i.locals={Block:"_1R6Sur5D",PreviewBlock:"_3Ecu7-gf",EmbedCodeBlock:"_20pSmyKR",EmbedCodeArea:"_2I3wQqml",CopyButton:"_9bN0aFmY",TermsText:"_38NtEF0-",TermsLink:"_3YtB63aO"},e.exports=i},WpNh:function(e,t,a){"use strict";function i(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}t.a=function(e,t){var a;void 0===t&&(t=i);var n,r=[],o=!1;return function(){for(var i=[],d=0;d<arguments.length;d++)i[d]=arguments[d];return o&&a===this&&t(i,r)||(n=e.apply(this,i),o=!0,a=this,r=i),n}}},n9Au:function(e,t,a){var i=a("Po/G"),n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},r=Object.defineProperty||function(e,t,a){e[t]=a.value};"string"==typeof i&&(i=[[e.i,i,""]]),e.exports=function(e){var t=n({},e.locals||{});return r(t,"_",{value:function(){return e}}),r(t,"toString",{value:function(){return"function"==typeof e.toString?e.toString():""}}),t}(i)}}]);