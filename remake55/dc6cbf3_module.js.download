(window._ambjs=window._ambjs||[]).push([[396],{khg5:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return P}));var o,a,s,r,n,p=i("5n0U"),l=i("mK0O"),c=i("eijD"),b=(i("W0B4"),i("mXGw")),u=i.n(b),d=i("/m4v"),f=i("xfIn"),h=i("edSL"),m=i.n(h),O=i("/gfI"),g=i.n(O),w=i("z725"),j=i("tDZY"),v=i("lhY6"),I=i("othg"),y=i("8Dlg"),S=i("xoe0"),A=i("ShxF"),L=i("x9GJ");function U(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=parseInt(e,10);return!t||t<1?1:t}function M(){return(M=Object(c.a)((function*(e){var{dispatch:t,getState:i,match:o}=e,{params:a}=o,s=a.amebaId,r=yield t(Object(j.b)(s));if(!r||!r.error){var n=i().bloggerState,p=n.bloggerMap,l=n.blogMap[(p[s]||{}).blog];if(l&&l.blog_id){var c=x(a.page);yield Promise.all([t(Object(w.b)(l.blog_id,c,20)),t(Object(I.b)())]),Object(L.a)(i())&&(yield t(Object(I.a)())),yield t(Object(v.d)(s))}}}))).apply(this,arguments)}var P=Object(d.b)((function(e,t){var{match:i}=t,{params:o}=i,a=o.amebaId,s=e.bloggerState.bloggerMap[a]||{},r=s.attribute||{},n=r.isOfficial,p=r.isTieup,c=!0,b=e.entryState,u=x(o.page),d=b.blogPageMap["".concat(s.blog,"/").concat(u)]||{};if(d){var f=d.data;if(f){var h=b.entryMap;c=f.map(e=>h[e]).length>0}}var O=Object(L.a)(e),g=m()(e.userState,["userAttribute","isLoaded"])||!1,w=e.userState.sessionUser.amebaId||"",{followMap:j,followActionMap:v}=e.followState,I=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?U(Object(i),!0).forEach((function(t){Object(l.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({amebaId:a},j[a]||{});return{amebaId:a,followActionStatus:v.target||{},followButtonStatus:I,hasEntry:c,isFollowingUpperLimit:v.isUpperLimit||!1,isMember:O,isOfficial:n,isTieup:p,isUserAttributeLoaded:g,sessionAmebaId:w}}),{executeFollowRequest:v.a,executeUnfollowRequest:v.b})(o=Object(f.provideHooks)({done:function(e){return M.apply(this,arguments)}})((s=a=class extends u.a.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}shouldComponentUpdate(e){return this.props.amebaId!==e.amebaId||this.props.executeFollowRequest!==e.executeFollowRequest||this.props.executeUnfollowRequest!==e.executeUnfollowRequest||this.props.hasEntry!==e.hasEntry||this.props.isFollowingUpperLimit!==e.isFollowingUpperLimit||this.props.isMember!==e.isMember||this.props.isOfficial!==e.isOfficial||this.props.isTieup!==e.isTieup||this.props.isUserAttributeLoaded!==e.isUserAttributeLoaded||this.props.position!==e.position||this.props.sessionAmebaId!==e.sessionAmebaId||!g()(this.props.followActionStatus,e.followActionStatus)||!g()(this.props.followButtonStatus,e.followButtonStatus)}handleClick(e){var{followActionStatus:t,followButtonStatus:i,isMember:o,isUserAttributeLoaded:a,sessionAmebaId:s}=this.props,r=A.b;if(a&&o&&(!o||s)&&i.amebaId!==s&&!(i.hasErrors||i.amebaId===t.amebaId&&t.hasErrors||i.loading))if(i.amebaId===t.amebaId&&t.loading)e.preventDefault();else{if(i.isFollowing)return e.preventDefault(),void this.props.executeUnfollowRequest(i.amebaId,r);e.preventDefault(),this.props.executeFollowRequest(i.amebaId,r)}}render(){if(!this.props.hasEntry)return null;var e="top"===this.props.position?!this.props.isTieup:!this.props.isOfficial;return Object(p.a)("div",{className:"readerMainLink"},void 0,e&&Object(p.a)("p",{className:"imagelistLink"},void 0,Object(p.a)("a",{href:Object(y.a)(S.a.ImageList,{amebaId:this.props.amebaId})},void 0,r||(r=Object(p.a)("span",{},void 0,"\u30d6\u30ed\u30b0\u753b\u50cf\u4e00\u89a7\u3092\u898b\u308b")))),Object(p.a)("p",{className:"readerLink"},void 0,Object(p.a)("a",{href:"".concat(window.process.env.HTTP_PATH_BLOG_AMEBA,"/reader.do?bnm=").concat(this.props.amebaId),onClick:this.handleClick},void 0,n||(n=Object(p.a)("span",{},void 0,"\u3053\u306e\u30d6\u30ed\u30b0\u3092\u30d5\u30a9\u30ed\u30fc\u3059\u308b")))))}},a.displayName="PcNavigationBarOld",o=s))||o)||o}}]);