(window._ambjs=window._ambjs||[]).push([[24],{"75mF":function(e,t,r){"use strict";t.a={CHECKLIST_REGISTERED_UPPER_LIMIT:"checklistRegisteredUpperLimit",MIGRATION_APPEAL:"migrationAppeal",UPDATE_FEED_APPEAL:"updateFeedAppeal"}},BJBO:function(e,t,r){var n=r("NmMy"),a=r("tDyL"),o=r("dbCC"),i=r("Ublk"),c=r("TsNJ"),u=r("Lqcn"),d=r("yoW1");e.exports=function(e,t,r){var l=-1;t=n(t.length?t:[d],c(a));var f=o(e,(function(e,r,a){return{criteria:n(t,(function(t){return t(e)})),index:++l,value:e}}));return i(f,(function(e,t){return u(e,t,r)}))}},IEcU:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return c}));var n=r("g8Ka"),a=r("yRxO");function o(e,t){return e!==n.a.UN_REGISTERED||t?e===n.a.REGISTERED?n.b.REGISTERED:!(e!==n.a.UN_REGISTERED||!t)&&n.b.OVER:n.b.UN_REGISTERED}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],{pathname:o}=window.location,i=n.length>0?"/".concat(n.length):"",c="".concat(Object(a.b)(e,t)).concat(i),u=[r,...n].filter((e,t,r)=>r.indexOf(e)===t).filter(e=>e);return Object(a.a)(o,c,{follow_ids:u.join(",")})}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return!!e&&("amember"!==r&&(e!==Number(t)&&-1===n.findIndex(t=>Number(t.entry_id)===e)))}},Lqcn:function(e,t,r){var n=r("h9r5");e.exports=function(e,t,r){for(var a=-1,o=e.criteria,i=t.criteria,c=o.length,u=r.length;++a<c;){var d=n(o[a],i[a]);if(d)return a>=u?d:d*("desc"==r[a]?-1:1)}return e.index-t.index}},P6ex:function(e,t,r){"use strict";r.d(t,"c",(function(){return T})),r.d(t,"b",(function(){return P})),r.d(t,"a",(function(){return S}));var n=r("eijD"),a=r("wTO3"),o=r("edSL"),i=r.n(o),c=r("YFs1"),u=r.n(c),d=r("oZ+L"),l=r.n(d),f=r("3vJe"),p=r.n(f),s=r("o0Zv"),b=r("/HKI"),y=r("tDZY"),v=r("N7Nw"),g=r("othg"),m=r("sc2U"),h=r("g8Ka"),E=r("75mF"),O=r("IEcU"),I=r("oi/j"),w=r("x9GJ"),j=r("0Ou+"),_=(e,t,r,n)=>({type:j.h,payload:{feed:e,feedType:t,isUpperLimit:r,paging:n}}),T=Object(a.b)({ttl:300},e=>function(){var t=Object(n.a)((function*(t,r,n){var{fetchr:a}=n;yield t(Object(g.b)());var o=Object(w.a)(r()),c=o?h.c.MEMBER:h.c.NON_MEMBER,d=i()(r(),["followFeedState","feedMap","status","feedType"],"");d&&c!==d&&(yield t({type:j.a}));var f=i()(r(),["followFeedState","feedMap"],{}),y=f.status||{};if(y.loading)return null;var v=f.feed||[];if(e===h.g.INIT&&!i()(y,["hasErrors"],!1)&&(y.feedType&&u()(v)||!u()(v)))return null;try{if(t({type:j.g,payload:{feedType:c,requestType:e}}),o){var m=f.paging||{},E=e===h.g.MORE,O=E?m.next:"",T=i()(r(),["amebloTokenState","amebloToken"],""),P=yield b.c.getMemberChecklist(T,O);if(P.error)throw new Error(P.error);var R=(P.data||[]).map(e=>({amebaId:e.ameba_id,entryId:e.entry_id,publishFlg:e.publish_flg})),S=E?[...v,...R]:R,D=!!r().followState.followActionMap.isUpperLimit;return t(_(S,c,D,P.paging))}var A={},M=v.map(e=>e.amebaId);if(e===h.g.INIT){var L=i()(p.a.parse(document.cookie),"P",null);if(!L)return t(_([],c,!1,A));var x=yield s.a.getGuestStorage(L,Object(I.a)());if(!x.ok)throw new Error(yield x.text());var N=yield x.json();M=N?N.amebaIds:[]}if(u()(M))return t(_([],c,!1,A));var G=[],k=[];if(e===h.g.INIT&&(M.forEach(e=>{var t=v.findIndex(t=>t.amebaId===e);-1!==t?G.push(v[t]):k.push(e)}),u()(k)))return t(_(v,c,!1,A));u()(k)&&(k=M);var C=k.map(e=>a.read("blogLatestEntry").params({amebaId:e}).end().then(t=>{var r=t.data;return r||{ameba_id:e}}).catch(e=>("undefined"!=typeof window&&window.handleErrorBySentry&&window.handleErrorBySentry(e),{}))),U=(yield Promise.all(C)).filter(e=>!u()(e)).map(e=>({amebaId:e.ameba_id,entryCreatedDatetime:e.entry_created_datetime,entryId:e.entry_id,publishFlg:e.publish_flg})),F=[...G,...U],B=[...l()(F.filter(e=>!u()(e)&&e.entryCreatedDatetime),"entryCreatedDatetime","desc"),...F.filter(e=>!u()(e)&&!e.entryCreatedDatetime)],H=B.length===h.f;return t(_(B,c,H,A))}catch(K){return t((e=>({type:j.f,payload:{error:e},error:!0}))(K))}}));return function(e,r,n){return t.apply(this,arguments)}}()),P=Object(a.b)({ttl:200},e=>function(){var t=Object(n.a)((function*(t,r){if(i()(r(),["followFeedState","feedMap","status","loading"],!1))return null;e!==h.g.MORE&&e!==h.g.UPDATE||(yield t(T(e)));var a=i()(r(),["followFeedState","feedMap","feed"],[]);if(0===a.length)return null;try{return t({type:j.d,payload:{requestType:e}}),yield Promise.all(a.map(function(){var e=Object(n.a)((function*(e){var n=e.amebaId;n&&(yield t(Object(y.b)(n)));var a=i()(r(),["bloggerState","bloggerMap",n,"blog"],""),o=e.entryId;a&&o&&(yield t(Object(v.a)(a,o)))}));return function(t){return e.apply(this,arguments)}}())),t({type:j.e,payload:{dispFeedIds:a.map(e=>e.amebaId)}})}catch(o){return t({type:j.c})}}));return function(e,r){return t.apply(this,arguments)}}()),R=e=>({type:j.j,payload:{timelineFeed:e}}),S=(Object(a.b)({ttl:200},e=>function(){var t=Object(n.a)((function*(t,r){var n=i()(r(),["followFeedState","feedMap","feed"],[]);if(0===n.length)return t(R([]));var a=n.slice(0,10);try{for(var o=[],c=i()(r(),["historyState","historyArticleMap","historyArticle"],[]),u=0;u<a.length&&3!==o.length;u+=1){var d=a[u]||{};if(Object(O.c)(d.entryId,e,d.publishFlg,c)){yield t(Object(y.b)(d.amebaId));var l=i()(r(),["bloggerState","bloggerMap",d.amebaId,"blog"],"");l&&(yield t(Object(v.a)(l,d.entryId)));var f=i()(r(),["entryState","entryMap",d.entryId,"entry_id"],"");l&&f&&o.push(d)}}return t(R(o))}catch(p){return t((e=>({type:j.i,payload:{error:e},error:!0}))(p))}}));return function(e,r){return t.apply(this,arguments)}}()),()=>e=>Promise.all([e({type:j.b}),e(Object(m.a)(E.a.CHECKLIST_REGISTERED_UPPER_LIMIT,!1))]))},Ublk:function(e,t){e.exports=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}},dbCC:function(e,t,r){var n=r("T0uz"),a=r("SyCk");e.exports=function(e,t){var r=-1,o=a(e)?Array(e.length):[];return n(e,(function(e,n,a){o[++r]=t(e,n,a)})),o}},h9r5:function(e,t,r){var n=r("zXe4");e.exports=function(e,t){if(e!==t){var r=void 0!==e,a=null===e,o=e==e,i=n(e),c=void 0!==t,u=null===t,d=t==t,l=n(t);if(!u&&!l&&!i&&e>t||i&&c&&d&&!u&&!l||a&&c&&d||!r&&d||!o)return 1;if(!a&&!i&&!l&&e<t||l&&r&&o&&!a&&!i||u&&r&&o||!c&&o||!d)return-1}return 0}},o0Zv:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={};r.r(n),r.d(n,"getGuestStorage",(function(){return o})),r.d(n,"postGuestStorage",(function(){return i})),r.d(n,"deleteGuestStorage",(function(){return c}));var a=r("uVMC");function o(e,t){var r={pcookie:e,storageType:"BLOG_READER",pcookieExpirationDate:t},n=Object(a.a)("".concat(window.process.env.API_AGP,"/guest/storage"),r);return fetch(n,{cache:"no-cache",credentials:"include",mode:"cors",timeout:1e3})}function i(e,t,r,n){var o={pcookie:e,storageType:"BLOG_READER",value:t,pcookieExpirationDate:r,mineId:"".concat(window.process.env.MINE_ID),requestRoute:n},i=Object(a.a)("".concat(window.process.env.API_AGP,"/guest/storage"),o);return fetch(i,{method:"POST",cache:"no-cache",credentials:"include",mode:"cors",timeout:1e3})}function c(e,t,r,n){var o={pcookie:e,storageType:"BLOG_READER",value:t,pcookieExpirationDate:r,mineId:"".concat(window.process.env.MINE_ID),actionType:"USER_ACTION",deleteRoute:n},i=Object(a.a)("".concat(window.process.env.API_AGP,"/guest/storage/delete"),o);return fetch(i,{method:"POST",cache:"no-cache",credentials:"include",mode:"cors",timeout:1e3})}},"oZ+L":function(e,t,r){var n=r("BJBO"),a=r("PqlX");e.exports=function(e,t,r,o){return null==e?[]:(a(t)||(t=null==t?[]:[t]),a(r=o?void 0:r)||(r=null==r?[]:[r]),n(e,t,r))}},"oi/j":function(e,t,r){"use strict";function n(){return Math.round((new Date).getTime()/1e3)}r.d(t,"a",(function(){return n}))},sc2U:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("L9kV"),a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:n.a,payload:{moduleName:e,status:t,params:r}}}},yRxO:function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return s}));var n=r("mK0O"),a=r("F65w"),o=r.n(a),i=r("6hvu"),c=r.n(i),u=r("uVMC"),d=349442137;function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){return e&&t?"".concat(e,"/").concat(t):""}function s(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=f({frm_id:t},r),a=Object(u.a)("".concat(window.process.env.HTTP_PATH_AMEBLO).concat(e),n),i="dynamiclink",l="".concat(i,"/").concat(t),p={link:a,apn:"jp.ameba",ibi:"jp.co.cyberagent.Ameba",isi:d,efr:1,utm_source:"ameblo",utm_medium:"ameblo.jp",utm_content:l},s=c()(p,o.a),b=Object(u.a)("".concat(window.process.env.HTTP_PATH_BLOG_DYNAMIC_LINKS),s);return b}}}]);